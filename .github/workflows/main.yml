
имя: Развертывание в объектном хранилище Yandex

вкл:
  толкать:
    ветки: [ основная ] # <- укажите свою ветку, если она не основная
  workflow_dispatch: # позволяет запускать вручную

Вакансии:
  развернуть:
    работает на: последней версии Ubuntu

    шаги:
 — имя: Получить доступ к репозиторию
        использует: действия/оформить заказ@v4

 — имя: Установите awscli
        выполнить: |
 python -m pip install --upgrade pip
 pip установить awscli
 — имя: Синхронизация файлов с Яндекс.Хранилищем
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.YC_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.YC_SECRET_ACCESS_KEY }}
        выполнить: |
 SOURCE_DIR="./" # <- измените, если папка другая (например, "./3d")
 BUCKET="3dt" # <- замените на название вашего бака
 КОНЕЧНАЯ ТОЧКА: «https://storage.yandexcloud.net»
 echo ">>> Отладка: показать рабочий каталог и список"
 пвд
 ls -la
 если [ ! -d "$SOURCE_DIR" ]; то
 echo "ОШИБКА: исходный каталог $SOURCE_DIR не найден"
 выход 1
 фи
 echo ">>> Начинаем синхронизацию с s3://$BUCKET"
 aws s3 sync "$SOURCE_DIR" "s3://$BUCKET" --endpoint-url "$ENDPOINT" --acl public-read \
 --exclude ".git/*" --exclude ".github/*"
 echo ">>> Синхронизация завершена"
